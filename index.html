<!doctype html>
<html lang="zh-Hant">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>日語50音練習</title>
  <link rel="apple-touch-icon" href="icons/180.png">
  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <div class="container">
    <h1>日語50音練習（平假名 / 片假名）</h1>

    <div class="panel">
      <div class="controls">
        <div class="group">
          <label class="chk">
            <input id="toggleHira" type="checkbox" checked />
            題目包含：平假名
          </label>
          <label class="chk">
            <input id="toggleKata" type="checkbox" checked />
            題目包含：片假名
          </label>
        </div>

        <div class="group">
          <label class="chk">
            <input id="toggleAll" type="checkbox" checked />
            全選 / 全不選（音節）
          </label>
        </div>

        <div class="numWrap">
          <span style="font-size:14px;color:var(--muted);font-weight:700;">題數</span>
          <input id="countInput" type="number" min="1" step="1" value="20" inputmode="numeric" />
          <button id="startBtn">送出</button>
          <button class="ghost" id="clearResultBtn" title="清除底部結果">清除結果</button>
        </div>
      </div>

      <div class="hint">
        ✅ 每個音節左上角可勾選要不要出題。<br />
        ✅ 題目會「盡量讓每個你勾的音節都至少出現一次」，不足再隨機補齊到指定題數。<br />
        <span class="danger">⚠️ 若平/片兩個都取消，將無法開始出題。</span>
      </div>

      <div class="stickyFooter">
        <div class="stats" id="statsText">已選音節：0</div>
        <div class="stats" id="scriptText">目前題目腳本：平假名＋片假名</div>
      </div>

      <div class="tableWrap" id="tableWrap"></div>
    </div>

    <div class="resultBox" id="resultBox" style="display:none;">
      <h2>我不清楚的音節</h2>
      <div class="hint" id="resultHint"></div>
      <div class="chips" id="resultChips"></div>
    </div>
  </div>

  <!-- Quiz Overlay -->
  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="backdrop" id="backdrop"></div>

    <div class="quizCard" role="dialog" aria-modal="true" aria-label="五十音練習題目">
      <div class="quizHeader">
        <div class="title" id="progressText">1 / 20</div>
        <div class="progress" id="quitOverlay">X</div>
      </div>

      <div class="quizBody">
        <div class="quizKana" id="quizKana">あ</div>
        <div class="quizRomaji" id="quizRomaji">a</div>
        <div class="quizTip" id="quizTip">按「下一步」顯示羅馬拼音</div>
      </div>

      <div class="quizFooter">
        <button class="next" id="nextBtn">下一步</button>
        <button class="unknown" id="unknownBtn">我不清楚</button>
      </div>
    </div>
  </div>

  <script src="./app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js');
    }
  </script>
</body>

</html>